{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bhargavi_g\\\\Documents\\\\Nursery_live\\\\frontend\\\\src\\\\Pages\\\\ShopProvider.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport { backend_url } from '../App';\nimport { setProducts, setCartItems, addToCart, removeFromCart, updateCartQuantity, getCart } from '../actions/shopActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ShopProvider = ({\n  children\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const products = useSelector(state => state.products);\n  const cartItems = useSelector(state => state.cart.items);\n  const cartLoading = useSelector(state => state.cart.loading);\n  const cartError = useSelector(state => state.cart.error);\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const {\n          data\n        } = await axios.get(`${backend_url}/allproducts`);\n        dispatch(setProducts(data));\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      }\n    };\n    fetchProducts();\n  }, [dispatch]);\n  useEffect(() => {\n    if (localStorage.getItem(\"auth-token\")) {\n      dispatch(getCart());\n    }\n  }, [dispatch]);\n  const getTotalCartAmount = () => {\n    let totalAmount = 0;\n    for (const item in cartItems) {\n      if (cartItems[item] > 0) {\n        const itemInfo = products.find(product => product._id === Number(item));\n        totalAmount += cartItems[item] * (itemInfo ? itemInfo.new_price : 0);\n      }\n    }\n    return totalAmount;\n  };\n  const getTotalCartItems = () => {\n    let totalItem = 0;\n    for (const item in cartItems) {\n      if (cartItems[item] > 0) {\n        totalItem += cartItems[item];\n      }\n    }\n    return totalItem;\n  };\n  const contextValue = {\n    products,\n    cartItems,\n    addToCart: itemId => dispatch(addToCart(itemId)),\n    removeFromCart: itemId => dispatch(removeFromCart(itemId)),\n    updateCartQuantity: (itemId, newQuantity) => dispatch(updateCartQuantity(itemId, newQuantity)),\n    getTotalCartAmount,\n    getTotalCartItems,\n    cartLoading,\n    cartError\n  };\n  return /*#__PURE__*/_jsxDEV(ShopContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(ShopProvider, \"F7rSRNCjbE+U7SS2AKqD93CxOK4=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n_c = ShopProvider;\nexport default ShopProvider;\nvar _c;\n$RefreshReg$(_c, \"ShopProvider\");","map":{"version":3,"names":["React","useEffect","useSelector","useDispatch","axios","backend_url","setProducts","setCartItems","addToCart","removeFromCart","updateCartQuantity","getCart","jsxDEV","_jsxDEV","ShopProvider","children","_s","dispatch","products","state","cartItems","cart","items","cartLoading","loading","cartError","error","fetchProducts","data","get","console","localStorage","getItem","getTotalCartAmount","totalAmount","item","itemInfo","find","product","_id","Number","new_price","getTotalCartItems","totalItem","contextValue","itemId","newQuantity","ShopContext","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/bhargavi_g/Documents/Nursery_live/frontend/src/Pages/ShopProvider.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { backend_url } from '../App';\r\nimport {\r\n  setProducts,\r\n  setCartItems,\r\n  addToCart,\r\n  removeFromCart,\r\n  updateCartQuantity,\r\n  getCart,\r\n} from '../actions/shopActions';\r\n\r\nconst ShopProvider = ({ children }) => {\r\n  const dispatch = useDispatch();\r\n  const products = useSelector((state) => state.products);\r\n  const cartItems = useSelector((state) => state.cart.items);\r\n  const cartLoading = useSelector((state) => state.cart.loading);\r\n  const cartError = useSelector((state) => state.cart.error);\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const { data } = await axios.get(`${backend_url}/allproducts`);\r\n        dispatch(setProducts(data));\r\n      } catch (error) {\r\n        console.error(\"Error fetching products:\", error);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"auth-token\")) {\r\n      dispatch(getCart());\r\n    }\r\n  }, [dispatch]);\r\n\r\n  const getTotalCartAmount = () => {\r\n    let totalAmount = 0;\r\n    for (const item in cartItems) {\r\n      if (cartItems[item] > 0) {\r\n        const itemInfo = products.find((product) => product._id === Number(item));\r\n        totalAmount += cartItems[item] * (itemInfo ? itemInfo.new_price : 0);\r\n      }\r\n    }\r\n    return totalAmount;\r\n  };\r\n\r\n  const getTotalCartItems = () => {\r\n    let totalItem = 0;\r\n    for (const item in cartItems) {\r\n      if (cartItems[item] > 0) {\r\n        totalItem += cartItems[item];\r\n      }\r\n    }\r\n    return totalItem;\r\n  };\r\n\r\n  const contextValue = {\r\n    products,\r\n    cartItems,\r\n    addToCart: (itemId) => dispatch(addToCart(itemId)),\r\n    removeFromCart: (itemId) => dispatch(removeFromCart(itemId)),\r\n    updateCartQuantity: (itemId, newQuantity) => dispatch(updateCartQuantity(itemId, newQuantity)),\r\n    getTotalCartAmount,\r\n    getTotalCartItems,\r\n    cartLoading,\r\n    cartError,\r\n  };\r\n\r\n  return (\r\n    <ShopContext.Provider value={contextValue}>\r\n      {children}\r\n    </ShopContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ShopProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}