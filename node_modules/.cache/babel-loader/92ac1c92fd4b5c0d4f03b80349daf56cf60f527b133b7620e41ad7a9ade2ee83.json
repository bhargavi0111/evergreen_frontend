{"ast":null,"code":"const handleSubmit = async e => {\n  e.preventDefault();\n  if (!formData.email || state !== 'Forgot Password' && !formData.password) {\n    setError('Please fill all fields');\n    return;\n  }\n  if (!captchaToken) {\n    setError('Please complete the CAPTCHA');\n    return;\n  }\n  try {\n    let endpoint;\n    let response;\n    if (state === 'Forgot Password') {\n      endpoint = '/auth/forgot-password';\n      response = await axios.post(endpoint, {\n        email: formData.email,\n        captchaToken\n      });\n      dispatch(forgotPasswordSuccess(response.data.message));\n      alert('Password reset email sent if the email exists.');\n    } else {\n      endpoint = state === 'Login' ? '/auth/login' : '/auth/signup';\n      response = await axios.post(endpoint, {\n        ...formData,\n        captchaToken\n      });\n      if (response.data && response.data.token) {\n        localStorage.setItem('token', response.data.token);\n        dispatch(state === 'Login' ? loginSuccess(response.data.token) : signupSuccess(response.data.token));\n        navigate('/home');\n      } else {\n        dispatch(state === 'Login' ? loginFail('Unexpected response from server. Token not received.') : signupFail('Unexpected response from server. Token not received.'));\n      }\n    }\n  } catch (err) {\n    console.error('Error details:', err);\n\n    // Improve error logging\n    if (err.response) {\n      console.error('Error response:', err.response);\n      if (err.response.data) {\n        console.error('Error response data:', err.response.data);\n        setError(err.response.data.errors || 'An unexpected error occurred');\n      } else {\n        setError('An unexpected error occurred without response data');\n      }\n    } else if (err.request) {\n      console.error('Error request:', err.request);\n      setError('No response received from the server');\n    } else {\n      console.error('Error message:', err.message);\n      setError('An unexpected error occurred: ' + err.message);\n    }\n  }\n};","map":{"version":3,"names":["handleSubmit","e","preventDefault","formData","email","state","password","setError","captchaToken","endpoint","response","axios","post","dispatch","forgotPasswordSuccess","data","message","alert","token","localStorage","setItem","loginSuccess","signupSuccess","navigate","loginFail","signupFail","err","console","error","errors","request"],"sources":["C:/Users/bhargavi_g/Documents/Nursery_live/frontend/src/Pages/LoginSignup.jsx"],"sourcesContent":["const handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n\r\n  if (!formData.email || (state !== 'Forgot Password' && !formData.password)) {\r\n    setError('Please fill all fields');\r\n    return;\r\n  }\r\n\r\n  if (!captchaToken) {\r\n    setError('Please complete the CAPTCHA');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    let endpoint;\r\n    let response;\r\n\r\n    if (state === 'Forgot Password') {\r\n      endpoint = '/auth/forgot-password';\r\n      response = await axios.post(endpoint, {\r\n        email: formData.email,\r\n        captchaToken,\r\n      });\r\n      dispatch(forgotPasswordSuccess(response.data.message));\r\n      alert('Password reset email sent if the email exists.');\r\n    } else {\r\n      endpoint = state === 'Login' ? '/auth/login' : '/auth/signup';\r\n      response = await axios.post(endpoint, {\r\n        ...formData,\r\n        captchaToken,\r\n      });\r\n\r\n      if (response.data && response.data.token) {\r\n        localStorage.setItem('token', response.data.token);\r\n        dispatch(state === 'Login' ? loginSuccess(response.data.token) : signupSuccess(response.data.token));\r\n        navigate('/home');\r\n      } else {\r\n        dispatch(state === 'Login' ? loginFail('Unexpected response from server. Token not received.') : signupFail('Unexpected response from server. Token not received.'));\r\n      }\r\n    }\r\n  } catch (err) {\r\n    console.error('Error details:', err);\r\n\r\n    // Improve error logging\r\n    if (err.response) {\r\n      console.error('Error response:', err.response);\r\n\r\n      if (err.response.data) {\r\n        console.error('Error response data:', err.response.data);\r\n        setError(err.response.data.errors || 'An unexpected error occurred');\r\n      } else {\r\n        setError('An unexpected error occurred without response data');\r\n      }\r\n    } else if (err.request) {\r\n      console.error('Error request:', err.request);\r\n      setError('No response received from the server');\r\n    } else {\r\n      console.error('Error message:', err.message);\r\n      setError('An unexpected error occurred: ' + err.message);\r\n    }\r\n  }\r\n};\r\n"],"mappings":"AAAA,MAAMA,YAAY,GAAG,MAAOC,CAAC,IAAK;EAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;EAElB,IAAI,CAACC,QAAQ,CAACC,KAAK,IAAKC,KAAK,KAAK,iBAAiB,IAAI,CAACF,QAAQ,CAACG,QAAS,EAAE;IAC1EC,QAAQ,CAAC,wBAAwB,CAAC;IAClC;EACF;EAEA,IAAI,CAACC,YAAY,EAAE;IACjBD,QAAQ,CAAC,6BAA6B,CAAC;IACvC;EACF;EAEA,IAAI;IACF,IAAIE,QAAQ;IACZ,IAAIC,QAAQ;IAEZ,IAAIL,KAAK,KAAK,iBAAiB,EAAE;MAC/BI,QAAQ,GAAG,uBAAuB;MAClCC,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAI,CAACH,QAAQ,EAAE;QACpCL,KAAK,EAAED,QAAQ,CAACC,KAAK;QACrBI;MACF,CAAC,CAAC;MACFK,QAAQ,CAACC,qBAAqB,CAACJ,QAAQ,CAACK,IAAI,CAACC,OAAO,CAAC,CAAC;MACtDC,KAAK,CAAC,gDAAgD,CAAC;IACzD,CAAC,MAAM;MACLR,QAAQ,GAAGJ,KAAK,KAAK,OAAO,GAAG,aAAa,GAAG,cAAc;MAC7DK,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAI,CAACH,QAAQ,EAAE;QACpC,GAAGN,QAAQ;QACXK;MACF,CAAC,CAAC;MAEF,IAAIE,QAAQ,CAACK,IAAI,IAAIL,QAAQ,CAACK,IAAI,CAACG,KAAK,EAAE;QACxCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEV,QAAQ,CAACK,IAAI,CAACG,KAAK,CAAC;QAClDL,QAAQ,CAACR,KAAK,KAAK,OAAO,GAAGgB,YAAY,CAACX,QAAQ,CAACK,IAAI,CAACG,KAAK,CAAC,GAAGI,aAAa,CAACZ,QAAQ,CAACK,IAAI,CAACG,KAAK,CAAC,CAAC;QACpGK,QAAQ,CAAC,OAAO,CAAC;MACnB,CAAC,MAAM;QACLV,QAAQ,CAACR,KAAK,KAAK,OAAO,GAAGmB,SAAS,CAAC,sDAAsD,CAAC,GAAGC,UAAU,CAAC,sDAAsD,CAAC,CAAC;MACtK;IACF;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAAC;;IAEpC;IACA,IAAIA,GAAG,CAAChB,QAAQ,EAAE;MAChBiB,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEF,GAAG,CAAChB,QAAQ,CAAC;MAE9C,IAAIgB,GAAG,CAAChB,QAAQ,CAACK,IAAI,EAAE;QACrBY,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEF,GAAG,CAAChB,QAAQ,CAACK,IAAI,CAAC;QACxDR,QAAQ,CAACmB,GAAG,CAAChB,QAAQ,CAACK,IAAI,CAACc,MAAM,IAAI,8BAA8B,CAAC;MACtE,CAAC,MAAM;QACLtB,QAAQ,CAAC,oDAAoD,CAAC;MAChE;IACF,CAAC,MAAM,IAAImB,GAAG,CAACI,OAAO,EAAE;MACtBH,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAACI,OAAO,CAAC;MAC5CvB,QAAQ,CAAC,sCAAsC,CAAC;IAClD,CAAC,MAAM;MACLoB,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAACV,OAAO,CAAC;MAC5CT,QAAQ,CAAC,gCAAgC,GAAGmB,GAAG,CAACV,OAAO,CAAC;IAC1D;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}